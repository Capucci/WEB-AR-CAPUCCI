<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script>
const VERSION = "1.9.8"; 
// ↑ SEMPRE que atualizar modelo ou target,
// só mude esse número
</script>

<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>

<!-- Necessário para animações GLB -->
<script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

<style>
body { margin:0; overflow:hidden; }

/* Remove botão VR completamente */
.a-enter-vr {
  display: none !important;
}
</style>

</head>

<body>

<a-scene
  embedded
  mindar-image="imageTargetSrc: TargetBalboa.mind;"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false">

  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <!-- TARGET -->
  <a-entity mindar-image-target="targetIndex: 0" target-events>

    <!-- MODELO 3D ANIMADO -->
    <a-entity
      id="mascote"
      gltf-model="MascoteMana.glb"
      animation-mixer="clip: *"
      position="0 0 0.3"
      rotation="-90 0 0"
      scale="0.7 0.7 0.7">
    </a-entity>

    <!-- AUDIO -->
    <a-entity
      id="audioMascote"
      sound="src: url(AudioTrack11.mp3); autoplay: false; loop: true; volume: 1">
    </a-entity>

  </a-entity>

</a-scene>

<!-- SCRIPT DE CONTROLE DO TARGET -->
<script>
AFRAME.registerComponent('target-events', {
  init: function () {

    const audio = document.querySelector('#audioMascote');

    this.el.addEventListener('targetFound', () => {
      if(audio && audio.components.sound){
        audio.components.sound.playSound();
      }
    });

    this.el.addEventListener('targetLost', () => {
      if(audio && audio.components.sound){
        audio.components.sound.stopSound();
      }
    });

  }
});
</script>

</body>
</html>
